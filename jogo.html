<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Vinland Saga - Encontre Askeladd</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #1e1e2f;
      color: white;
      text-align: center;
    }

    h1 {
      margin: 20px;
    }

    #gameArea {
      position: relative;
      width: 600px;
      height: 400px;
      background-color: #3a3a50;
      margin: 0 auto;
      border: 3px solid #fff;
      overflow: hidden;
    }

    .character {
      position: absolute;
      width: 60px;
      height: 60px;
      text-align: center;
      line-height: 60px;
      font-size: 30px;
      border-radius: 10px;
    }

    #thorfinn {
      background-color: #2196f3;
      left: 20px;
      top: 20px;
    }

    #askeladd {
      background-color: #e53935;
      left: 400px;
      top: 300px;
    }

    .obstacle {
      position: absolute;
      width: 60px;
      height: 60px;
      background-color: #555;
      border-radius: 10px;
    }

    #controls {
      margin-top: 20px;
    }

    button {
      font-size: 18px;
      padding: 10px 20px;
      margin: 5px;
      background-color: #4caf50;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 8px;
    }

    button:hover {
      background-color: #45a049;
    }

    #scoreboard {
      margin-top: 20px;
    }

    #scoreboard span {
      font-size: 20px;
    }

    #timer {
      font-size: 20px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <h1>Vinland Saga - Encontre Askeladd</h1>

  <div id="gameArea">
    <div id="thorfinn" class="character">üó°Ô∏è</div>
    <div id="askeladd" class="character">üéØ</div>
    <div id="obstacle1" class="obstacle" style="left: 150px; top: 100px;"></div>
    <div id="obstacle2" class="obstacle" style="left: 300px; top: 200px;"></div>
    <div id="obstacle3" class="obstacle" style="left: 500px; top: 150px;"></div>
  </div>

  <div id="controls">
    <div>
      <button onclick="move('up')">‚Üë</button>
    </div>
    <div>
      <button onclick="move('left')">‚Üê</button>
      <button onclick="move('down')">‚Üì</button>
      <button onclick="move('right')">‚Üí</button>
    </div>
  </div>

  <div id="scoreboard">
    <span>Pontua√ß√£o: <span id="score">0</span></span>
  </div>
  
  <div id="timer">
    Tempo restante: <span id="timeLeft">30</span> segundos
  </div>

  <script>
    const thorfinn = document.getElementById("thorfinn");
    const askeladd = document.getElementById("askeladd");
    const gameArea = document.getElementById("gameArea");

    const STEP = 20;
    let score = 0;
    let timeLeft = 30; // Tempo inicial (em segundos)
    let timerInterval;

    const obstacles = [
      document.getElementById("obstacle1"),
      document.getElementById("obstacle2"),
      document.getElementById("obstacle3")
    ];

    function updateScore() {
      document.getElementById("score").textContent = score;
    }

    function updateTimer() {
      document.getElementById("timeLeft").textContent = timeLeft;
    }

    function move(direction) {
      const rect = thorfinn.getBoundingClientRect();
      const areaRect = gameArea.getBoundingClientRect();

      let top = thorfinn.offsetTop;
      let left = thorfinn.offsetLeft;

      switch (direction) {
        case "up":
          if (top > 0) top -= STEP;
          break;
        case "down":
          if (top + thorfinn.offsetHeight < gameArea.offsetHeight) top += STEP;
          break;
        case "left":
          if (left > 0) left -= STEP;
          break;
        case "right":
          if (left + thorfinn.offsetWidth < gameArea.offsetWidth) left += STEP;
          break;
      }

      // Verifica se houve colis√£o com obst√°culos
      if (!checkCollisionWithObstacles(top, left)) {
        thorfinn.style.top = top + "px";
        thorfinn.style.left = left + "px";
      }

      checkCollisionWithAskeladd();
    }

    // Verifica colis√µes com obst√°culos
    function checkCollisionWithObstacles(top, left) {
      for (let i = 0; i < obstacles.length; i++) {
        const obstacle = obstacles[i];
        const oBox = obstacle.getBoundingClientRect();
        const tBox = {
          top: top,
          left: left,
          bottom: top + thorfinn.offsetHeight,
          right: left + thorfinn.offsetWidth
        };

        // Verifica se h√° colis√£o com o obst√°culo
        if (!(tBox.right < oBox.left || tBox.left > oBox.right || tBox.bottom < oBox.top || tBox.top > oBox.bottom)) {
          alert("Voc√™ bateu em um obst√°culo! Tente novamente.");
          return true;
        }
      }
      return false;
    }

    // Verifica colis√£o com Askeladd
    function checkCollisionWithAskeladd() {
      const tBox = thorfinn.getBoundingClientRect();
      const aBox = askeladd.getBoundingClientRect();

      const overlap = !(
        tBox.right < aBox.left ||
        tBox.left > aBox.right ||
        tBox.bottom < aBox.top ||
        tBox.top > aBox.bottom
      );

      if (overlap) {
        alert("Vit√≥ria! Thorfinn encontrou Askeladd!");
        score += timeLeft;  // Pontua√ß√£o baseada no tempo restante
        updateScore();
        clearInterval(timerInterval); // Para o timer
        moveAskeladd();  // Move Askeladd para uma nova posi√ß√£o aleat√≥ria
        startGame();  // Reinicia o jogo
      }
    }

    // Move Askeladd para uma posi√ß√£o aleat√≥ria
    function moveAskeladd() {
      const randomX = Math.floor(Math.random() * (gameArea.offsetWidth - 60));
      const randomY = Math.floor(Math.random() * (gameArea.offsetHeight - 60));

      askeladd.style.left = randomX + "px";
      askeladd.style.top = randomY + "px";
    }

    // Inicia o jogo com novo tempo e pontua√ß√£o
    function startGame() {
      // Reinicia o tempo e a pontua√ß√£o
      timeLeft = 30;
      updateTimer();
      score = 0;
      updateScore();

      // Inicia o timer
      timerInterval = setInterval(function() {
        timeLeft--;
        updateTimer();

        if (timeLeft <= 0) {
          clearInterval(timerInterval);  // Para o timer
          alert("Tempo esgotado! O jogo acabou.");
          startGame();  // Reinicia o jogo
        }
      }, 1000);
    }

    // Adiciona eventos de teclado
    window.addEventListener("keydown", function(event) {
      switch (event.key) {
        case "ArrowUp":
          move("up");
          break;
        case "ArrowDown":
          move("down");
          break;
        case "ArrowLeft":
          move("left");
          break;
        case "ArrowRight":
          move("right");
          break;
      }
    });

    // Inicia o jogo
    startGame();
  </script>

</body>
</html>
